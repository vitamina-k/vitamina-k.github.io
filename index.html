<!doctype html>
<html lang="es">
<head>
  <!-- ===== META ===== -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>VITAMINA K</title>
  <meta name="description" content="Publicación viva con carrusel, stories y encuesta.">
  <meta property="og:title" content="Vitamina K — Publicación">
  <meta property="og:description" content="Publicación viva con carrusel, stories y encuesta.">
  <meta property="og:type" content="website">

  <style>
    /* ===== THEME (claro/oscuro) ===== */
    :root{
      --fg:#101216; --bg:#f7f8fb; --card:#ffffffcc; --accent:#0b5cff; --muted:#6b7280;
    }
    @media (prefers-color-scheme: dark){
      :root{ --fg:#eceff4; --bg:#0b0d12; --card:#0f1320cc; --accent:#7aa2ff; --muted:#9aa3b2; }
    }

    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}

    /* Layout centrado */
    .wrap{
      min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px;
    }

    /* Tarjeta base */
    .card{
      width:clamp(320px,92vw,860px);
      border:1px solid #00000012; border-radius:18px;
      padding:22px 22px 18px; background:var(--card);
      backdrop-filter:saturate(1.2) blur(12px); box-shadow:0 12px 42px #00000014;
    }

    .brand{display:flex;gap:10px;align-items:center;margin-bottom:6px;font-weight:700;letter-spacing:.2px}
    .headline{font-size:clamp(22px,5vw,38px);margin:8px 0 6px}
    .kpi{font-size:clamp(26px,6.5vw,52px);font-weight:800;margin:2px 0 8px;color:var(--accent)}
    .sub{opacity:.9;margin:0 0 12px;color:var(--muted)}
    .muted{color:var(--muted)}
    .hidden{display:none}

    /* Barra superior de progreso */
    .bar{position:fixed;top:0;left:0;height:3px;background:var(--accent);transform-origin:0 0;transform:scaleX(0);z-index:10}

    /* Controles */
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button,.btn{border:1px solid #00000022;background:transparent;padding:10px 14px;border-radius:12px;cursor:pointer;color:inherit;text-decoration:none}
    button:hover,.btn:hover{border-color:#00000044}

    /* ===== Stories ===== */
    .stories{margin-top:12px;border:1px dashed #00000022;border-radius:14px;padding:8px}
    .story-frame{position:relative;height:320px;border-radius:12px;overflow:hidden}
    .story-track{display:flex;height:100%;transition:transform .3s ease-out}
    .story{min-width:100%;position:relative;background:#000}
    .story img{width:100%;height:100%;object-fit:cover;opacity:.88}
    .story .label{position:absolute;left:0;top:0;padding:8px 10px;background:rgba(0,0,0,.45);color:#fff;border-bottom-right-radius:10px;font-weight:700}
    .story .text{position:absolute;left:10px;right:10px;bottom:12px;color:#fff;font-weight:700;font-size:clamp(16px,3.5vw,24px);text-shadow:0 2px 12px #000}
    .story-dots{display:flex;gap:6px;justify-content:center;margin-top:8px}
    .story-dot{flex:1;height:4px;background:#00000033;border-radius:3px}
    .story-dot.active{background:var(--accent)}

    /* ===== Encuesta ===== */
    .poll{margin-top:14px;padding:12px;border:1px solid #00000018;border-radius:12px}
    .poll h3{margin:0 0 8px}
    .opt{display:flex;align-items:center;gap:8px;margin:8px 0}
    .barline{flex:1;height:8px;background:#00000015;border-radius:6px;overflow:hidden}
    .fill{height:100%;width:0%;background:var(--accent);transition:width .4s ease}
    .only-once{font-size:13px}
    .opt button[disabled]{opacity:.6;cursor:not-allowed}
    .you{font-size:12px;color:var(--muted);margin-left:6px}

    /* ===== HERO (tarjeta final) ===== */
    .card.hero{
      width:clamp(360px,96vw,980px);
      padding:28px; border-radius:22px;
      background:
        radial-gradient(1200px 600px at 10% -10%, #0b5cff18, transparent 60%),
        radial-gradient(900px 500px at 110% 0%, #8aa9ff18, transparent 60%),
        var(--card);
    }

    .center { text-align: center; }

    .hero-final {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .social-center {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-top: 20px;
    }

    .logo-bubble {
      width: 96px;
      height: 96px;
      border-radius: 22px;
      display: grid;
      place-items: center;
      background: #fff;
      box-shadow: 0 14px 36px #0b5cff22;
      border: 1px solid #0001;
      transition: transform .15s ease;
    }

    .logo-bubble:hover { transform: translateY(-2px); }
    .logo-bubble svg { width: 50px; height: 50px; }

    /* ===== NOTICIA ===== */
    .news{
      margin-top:16px; border:1px solid #00000018; border-radius:14px;
      padding:14px; background:var(--card); display:grid; gap:16px;
      grid-template-columns: 1.15fr 1fr;
    }
    .news figure{margin:0; border-radius:12px; overflow:hidden}
    .news img{width:100%; height:100%; object-fit:cover; display:block}
    .news-body{display:flex; flex-direction:column; gap:10px}
    .news-title{font-size:clamp(18px,3.5vw,28px); margin:0}
    .news-dek{margin:0; color:var(--muted)}
    .news-meta{font-size:13px; color:var(--muted)}
    .news-sources{font-size:13px}
    .news-sources a{color:inherit; text-decoration:underline}
    .news-actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:6px}
    .news-actions .btn{padding:8px 12px; border-radius:10px}
    @media (max-width:880px){
      .news{grid-template-columns:1fr}
      .news img{max-height:320px}
    }
  </style>
</head>
<body>
  <div class="bar" id="bar"></div>

  <div class="wrap">
    <!-- ===== Vista VIVA ===== -->
    <article class="card" id="view-live">
      <div class="brand" id="brandEl">La noticia</div>
      <h1 class="headline" id="title"></h1>
      <div class="kpi" id="kpi"></div>
      <p class="sub" id="subtitle"></p>

      <!-- ===== NOTICIA ACTUAL ===== -->
      <section class="news" id="news-granada">
        <figure>
          <img src="assets/granada-playa-retenciones.jpg" alt="Bañistas retienen a migrantes en una playa de Granada">
        </figure>
        <div class="news-body">
          <h2 class="news-title">
            Bañistas retienen a migrantes en Granada; el debate estalla en redes
          </h2>
          <p class="news-dek">
            El episodio en Castell de Ferro desata indignación. Artistas y usuarios denuncian
            la “caza al vulnerable” y el clima de tensión social.
          </p>
          <div class="news-meta">Actualizado · Ago 2025 · Impacto social / política</div>
          <div class="news-sources">
            Fuentes:
            <a href="https://elpais.com/espana/2025-08-05/un-grupo-de-banistas-retiene-por-la-fuerza-a-migrantes-llegados-a-una-playa-de-granada.html" target="_blank" rel="noopener">El País</a>,
            <a href="https://cadenaser.com/nacional/2025/08/05/pobres-persiguiendo-a-pobres-ismael-serrano-da-en-el-clavo-sobre-la-imagen-mas-triste-del-verano-cadena-ser/" target="_blank" rel="noopener">Cadena SER</a>
          </div>
          <div class="news-actions">
            <button class="btn" id="copy-news">Copiar texto + enlace</button>
            <a class="btn" href="https://www.instagram.com/vitaminak.of" target="_blank" rel="noopener">IG</a>
            <a class="btn" href="https://x.com/vitaminakof" target="_blank" rel="noopener">X</a>
          </div>
        </div>
      </section>

      <!-- Stories y Encuesta siguen aquí -->
    </article>

    <!-- ===== Vista HERO ===== -->
    <article class="card hero hidden" id="view-default">
      <div class="hero-final">
        <h1 class="headline center">@vitaminak.of</h1>
        <p class="sub center">
          Si no puedes ver la noticia es porque en esta web tienen una temporalidad. 
          Pero no te preocupes, puedes seguir viendo más en mis redes sociales.
        </p>
        <div class="social-center">
          <a class="logo-bubble" href="https://www.instagram.com/vitaminak.of" target="_blank" rel="noopener" aria-label="Instagram">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <defs><linearGradient id="ig" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#f58529"/><stop offset="50%" stop-color="#dd2a7b"/><stop offset="100%" stop-color="#8134af"/>
              </linearGradient></defs>
              <rect x="2" y="2" width="20" height="20" rx="5" stroke="url(#ig)" stroke-width="1.5"/>
              <circle cx="12" cy="12" r="4.2" stroke="url(#ig)" stroke-width="1.5"/>
              <circle cx="17.5" cy="6.5" r="1.2" fill="url(#ig)"/>
            </svg>
          </a>
          <a class="logo-bubble" href="https://x.com/vitaminakof" target="_blank" rel="noopener" aria-label="X">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M3 3l8.6 10.2L3.9 21H7l5.5-6.4L18.8 21H21l-9-10.7L20.5 3H17.4L12.3 8.8 8.2 3H3z" fill="#000"/>
            </svg>
          </a>
        </div>
      </div>
    </article>
  </div>

  <script>
    const CONFIG = {
      title: "",
      kpi: "",
      subtitle: "",
      shareText: "El dato que no te cuentan. #VitaminaK",
      expiresHours: 6,
      expiresSeconds: null,
      datoHTML: "<strong>Dato</strong>: …",
      contextoHTML: "<strong>Contexto</strong>: …",
      pollKey: "vk_poll_v3",
      pollQuestion: "",
      pollOptions: [],
    };

    const titleEl = document.getElementById('title');
    const kpiEl = document.getElementById('kpi');
    const subtitleEl = document.getElementById('subtitle');
    titleEl.textContent = CONFIG.title || "";
    kpiEl.textContent = CONFIG.kpi || "";
    subtitleEl.textContent = CONFIG.subtitle || "";

    let showingDato = true;

    const live = document.getElementById('view-live');
    const def  = document.getElementById('view-default');
    const countdown = document.getElementById('countdown');

    const startTime = new Date(2025, 7, 11, 6, 0, 0);
    const endTime = new Date(2025, 7, 11, 16, 0, 0);
    let expiresAt;

    if (Date.now() < startTime.getTime()) {
      expiresAt = startTime.getTime();
    } else if (Date.now() >= startTime.getTime() && Date.now() < endTime.getTime()) {
      expiresAt = endTime.getTime();
    } else {
      expiresAt = Date.now();
    }

    function tick(){
      const ms = expiresAt - Date.now();
      if (ms <= 0) {
        live.classList.add('hidden');
        def.classList.remove('hidden');
        document.body.classList.add('show-hero');
        return;
      }
      const h = Math.floor(ms/3600000),
            m = Math.floor((ms%3600000)/60000),
            s = Math.floor((ms%60000)/1000);
      countdown.textContent = `Desaparece en ${h}h ${m}m ${s}s`;
    }
    setInterval(tick, 1000); tick();
  </script>
</body>
</html>

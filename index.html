<!doctype html>
<html lang="es">
<head>
  <!-- META / CABECERA DEL DOCUMENTO -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Vitamina K ‚Äî Publicaci√≥n</title>
  <meta name="description" content="Publicaci√≥n viva con carrusel, stories y encuesta.">
  <meta property="og:type" content="website">

  <style>
    /* ====== VARIABLES Y BASE ====== */
    :root{--fg:#101216;--bg:#0b0d12;--card:#0f1320cc;--accent:#7aa2ff;--muted:#9aa3b2}
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}

    /* CONTENEDOR CENTRAL DE LA P√ÅGINA (CENTRADO VERTICAL Y HORIZONTAL) */
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}

    /* TARJETAS GENERALES (BORDES, SOMBRA, FONDO) */
    .card{
      width:clamp(320px,92vw,860px);
      border:1px solid #0002;border-radius:18px;padding:22px;
      background:var(--card);backdrop-filter:saturate(1.2) blur(12px);
      box-shadow:0 12px 42px #0003
    }

    /* TIPOGRAF√çA DE T√çTULOS / KPIs / SUBT√çTULOS */
    .brand{display:flex;gap:10px;align-items:center;margin-bottom:6px;font-weight:700;letter-spacing:.2px}
    .headline{font-size:clamp(22px,5vw,38px);margin:8px 0 6px}
    .kpi{font-size:clamp(26px,6.5vw,52px);font-weight:800;margin:2px 0 8px;color:var(--accent)}
    .sub{opacity:.9;margin:0 0 12px;color:var(--muted)}
    .muted{color:var(--muted)}

    /* BARRA SUPERIOR DE PROGRESO (DECORATIVA) */
    .bar{position:fixed;top:0;left:0;height:3px;background:var(--accent);transform-origin:0 0;transform:scaleX(0);z-index:10}

    /* CONTROLES AL PIE DE LA VISTA ‚ÄúVIVA‚Äù (BOTONES + CONTADOR) */
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button,.btn{border:1px solid #0003;background:transparent;padding:10px 14px;border-radius:12px;cursor:pointer;color:inherit;text-decoration:none}
    .hidden{display:none}

    /* ====== CARRUSEL DE IM√ÅGENES ====== */
    .carousel{position:relative;border-radius:14px;overflow:hidden;user-select:none;margin-bottom:10px}
    .track{display:flex;transition:transform .35s ease-out}
    .slide{min-width:100%;height:220px;position:relative}
    .slide img{width:100%;height:100%;object-fit:cover;display:block}
    .caption{position:absolute;left:12px;bottom:12px;right:12px;background:linear-gradient(to top,#0009,#0000);color:#fff;padding:10px 12px;border-radius:10px;font-weight:600}
    .nav{position:absolute;top:50%;transform:translateY(-50%);display:flex;gap:8px;width:100%;justify-content:space-between;padding:0 6px;pointer-events:none}
    .nav button{pointer-events:auto;background:rgba(0,0,0,.35);color:#fff;border:0;border-radius:10px;padding:8px 10px}
    .dots{display:flex;gap:6px;justify-content:center;margin-top:8px}
    .dot{width:8px;height:8px;border-radius:50%;background:#0005}
    .dot.active{background:var(--accent)}

    /* ====== STORIES (PANTALLAS TIPO HISTORIAS) ====== */
    .stories{margin-top:12px;border:1px dashed #0003;border-radius:14px;padding:8px}
    .story-frame{position:relative;height:320px;border-radius:12px;overflow:hidden}
    .story-track{display:flex;height:100%;transition:transform .3s ease-out}
    .story{min-width:100%;position:relative;background:#000}
    .story img{width:100%;height:100%;object-fit:cover;opacity:.9}
    .story .label{position:absolute;left:0;top:0;padding:8px 10px;background:rgba(0,0,0,.45);color:#fff;border-bottom-right-radius:10px;font-weight:700}
    .story .text{position:absolute;left:10px;right:10px;bottom:12px;color:#fff;font-weight:700;font-size:clamp(16px,3.5vw,24px);text-shadow:0 2px 12px #000}
    .story-dots{display:flex;gap:6px;justify-content:center;margin-top:8px}
    .story-dot{flex:1;height:4px;background:#0005;border-radius:3px}
    .story-dot.active{background:var(--accent)}

    /* ====== ENCUESTA (UI) ====== */
    .poll{margin-top:14px;padding:12px;border:1px solid #0003;border-radius:12px}
    .opt{display:flex;align-items:center;gap:8px;margin:8px 0}
    .barline{flex:1;height:8px;background:#0004;border-radius:6px;overflow:hidden}
    .fill{height:100%;width:0%;background:var(--accent);transition:width .4s ease}
    .opt button[disabled]{opacity:.6;cursor:not-allowed}
    .only-once{font-size:13px}

    /* ====== HERO FINAL (TARJETA TRAS CADUCAR / FUERA DE HORARIO) ====== */
    .card.hero{width:clamp(380px,96vw,1000px);padding:32px;border-radius:22px;background:
        radial-gradient(1200px 600px at 10% -10%, #0b5cff18, transparent 60%),
        radial-gradient(900px 500px at 110% 0%, #8aa9ff18, transparent 60%),
        var(--card);}
    .hero-grid{display:grid;grid-template-columns:1fr 1.2fr;gap:22px;align-items:start}
    .hero-left{display:flex;flex-direction:column;gap:10px}
    .hero-right{display:flex;flex-direction:column;gap:12px;justify-content:flex-start;align-self:flex-start}
    .hero-title{font-size:clamp(22px,5vw,40px);margin:0 0 12px;font-weight:900;letter-spacing:.2px}
    .social-logos{display:flex;gap:14px;align-items:center;flex-wrap:wrap;margin-top:6px}
    .logo-bubble{width:84px;height:84px;border-radius:20px;display:grid;place-items:center;background:#fff;box-shadow:0 14px 36px #0b5cff22;border:1px solid #0001}
    .logo-bubble svg{width:44px;height:44px}
    .btn.primary{background:var(--accent);color:#fff;border-color:transparent;font-weight:700;padding:12px 16px;border-radius:14px}
    .btn.outline{border:2px solid var(--accent);padding:12px 16px;border-radius:14px;font-weight:700}

    /* FONDO CUANDO SE VE LA HERO (OPCIONAL) */
    body.show-hero{background:
        radial-gradient(1200px 700px at 50% -10%, #0b5cff22, transparent 60%),
        radial-gradient(900px 600px at 50% 10%, #8aa9ff22, transparent 60%),
        var(--bg);}
  </style>
</head>
<body>
  <!-- BARRA PROGRESO SUPERIOR -->
  <div class="bar" id="bar"></div>

  <div class="wrap">
    <!-- ========== VISTA ‚ÄúVIVA‚Äù (se ve durante la ventana/tiempo) ========== -->
    <article class="card" id="view-live">
      <div class="brand" id="brandEl"></div>     <!-- NOMBRE DE LA SECCI√ìN/MARCA -->
      <h1 class="headline" id="title"></h1>      <!-- T√çTULO NOTICIA -->
      <div class="kpi" id="kpi"></div>           <!-- KPI (puedes dejarlo vac√≠o) -->
      <p class="sub" id="subtitle"></p>          <!-- SUBT√çTULO NOTICIA -->

      <!-- CARRUSEL DE IM√ÅGENES (se rellena por JS con tu contenido) -->
      <section class="carousel" id="carousel">
        <div class="track" id="track"></div>
        <div class="nav">
          <button id="prev" aria-label="Anterior">‚Üê</button>
          <button id="next" aria-label="Siguiente">‚Üí</button>
        </div>
        <div class="dots" id="dots"></div>
      </section>

      <!-- STORIES (se rellenan por JS con tu contenido) -->
      <section class="stories" id="stories">
        <div class="story-frame"><div class="story-track" id="storyTrack"></div></div>
        <div class="story-dots" id="storyDots"></div>
      </section>

      <!-- ENCUESTA (se rellena por JS con tus opciones) -->
      <section class="poll">
        <h3 id="pollQ"></h3>
        <div class="only-once muted">Voto √∫nico por dispositivo</div>
        <div id="options"></div>
        <div id="totals" class="muted" style="margin-top:8px"></div>
      </section>

      <!-- CONTROLES: COPIAR TEXTO PARA X + MENSAJE/CONTADOR (puedes ocultar) -->
      <div class="controls">
        <button id="copy">Copiar para X</button>
        <button id="toggle">Dato ‚Üî Contexto</button>
        <span id="countdown" class="muted"></span>
      </div>
    </article>

    <!-- ========== VISTA ‚ÄúHERO FINAL‚Äù (cuando acaba tiempo o fuera de horario) ========== -->
    <article class="card hero hidden" id="view-default">
      <div class="hero-grid">
        <!-- Columna izquierda: marca/handle/bio + iconos -->
        <div class="hero-left">
          <div class="brand" id="brandFinal"></div>
          <h1 class="headline" id="handleFinal"></h1>
          <p class="sub" id="bioFinal"></p>
          <div class="social-logos">
            <!-- Icono Instagram (enlace lo pone JS) -->
            <a class="logo-bubble" id="igLogo" target="_blank" rel="noopener" aria-label="Instagram">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <defs><linearGradient id="ig" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0%" stop-color="#f58529"/><stop offset="50%" stop-color="#dd2a7b"/><stop offset="100%" stop-color="#8134af"/>
                </linearGradient></defs>
                <rect x="2" y="2" width="20" height="20" rx="5" stroke="url(#ig)" stroke-width="1.5"/>
                <circle cx="12" cy="12" r="4.2" stroke="url(#ig)" stroke-width="1.5"/>
                <circle cx="17.5" cy="6.5" r="1.2" fill="url(#ig)"/>
              </svg>
            </a>
            <!-- Icono X (enlace lo pone JS) -->
            <a class="logo-bubble" id="xLogo" target="_blank" rel="noopener" aria-label="X">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M3 3l8.6 10.2L3.9 21H7l5.5-6.4L18.8 21H21l-9-10.7L20.5 3H17.4L12.3 8.8 8.2 3H3z" fill="#000"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Columna derecha: CTA seguir -->
        <div class="hero-right">
          <h2 class="hero-title" id="ctaTitle"></h2>
          <p class="sub" id="ctaSub"></p>
          <div class="cta-row">
            <a class="btn primary" id="ctaX" target="_blank" rel="noopener">Seguir en X</a>
            <a class="btn outline"  id="ctaIG" target="_blank" rel="noopener">Seguir en Instagram</a>
          </div>
        </div>
      </div>
    </article>
  </div>

  <script>
    /* =====================================================
       üß© CONTENIDO: EDITA SOLO AQU√ç
       (aqu√≠ es donde sustituyes la noticia cada vez)
    ===================================================== */
    const CONTENT = {
      // EDITA: marca/cabecera de la noticia
      brand: "VITAMINA K ¬∑ Publicaci√≥n",   // Ej: ‚ÄúVITAMINA K ¬∑ Especial‚Äù
      title: "",                            // T√çTULO de la noticia (vac√≠o por defecto)
      kpi: "",                              // KPI (puedes dejar vac√≠o y no se ver√° nada)
      subtitle: "",                         // SUBT√çTULO breve (vac√≠o por defecto)

      // EDITA: dato/contexto (texto corto, puedes dejar vac√≠o)
      datoHTML: "",                         // Ej: "<strong>Dato</strong>: 62%..."
      contextoHTML: "",                     // Ej: "<strong>Contexto</strong>: ‚Ä¶"

      /* === HORARIO DE PUBLICACI√ìN (elige un modo) ===
         - daily: se ve todos los d√≠as entre ‚Äústart‚Äù y ‚Äúend‚Äù (hora local del visitante)
         - window: solo entre las fechas/hora indicadas en ISO (una vez)
      */
      mode: "daily",                        // "daily" | "window"
      dailyWindow: { start: "00:00", end: "23:59" },   // EDITA horas locales (HH:MM)
      // windowISO: { start: "2025-08-10T12:00:00+02:00", end: "2025-08-11T12:00:00+02:00" },

      // EDITA: carrusel (4‚Äì6 im√°genes recomendadas)
      carousel: [
        // { src:"assets/images/tu-foto-1.webp", caption:"Pie de foto 1" },
        // { src:"assets/images/tu-foto-2.webp", caption:"Pie de foto 2" },
      ],

      // EDITA: stories (se ver√°n como 1/4, 2/4‚Ä¶)
      stories: [
        // { img:"assets/images/story-1.webp", text:"Texto de la story 1" },
      ],

      // EDITA: encuesta (o deja vac√≠o para no mostrarla)
      pollQuestion: "",                     // Ej: "¬øQu√© te parece‚Ä¶?"
      pollOptions: [],                      // Ej: ["S√≠","No","Depende"]
      pollKey: "vk_poll_v3",                // cambia para resetear votos locales

      // EDITA: tarjeta final (tus redes)
      finalBrand: "VITAMINA K",
      finalHandle: "@vitaminak.of",
      finalBio: "No vine a caer bien, vine a no caerme nunca.",
      ctaTitle: "S√çGUEME AHORA",
      ctaSub: "X ¬∑ Instagram",
      xUrl: "https://x.com/vitaminakof",
      igUrl: "https://www.instagram.com/vitaminak.of",

      // EDITA: texto para bot√≥n "Copiar para X"
      shareText: "El dato que no te cuentan. #VitaminaK"
    };
    /* =========================
       /üß© FIN CONTENIDO (NO EDITES M√ÅS ABAJO)
    ========================= */

    /* ====== MONTAJE INICIAL DE TEXTOS ====== */
    const brandEl = document.getElementById('brandEl');
    const titleEl = document.getElementById('title');
    const kpiEl = document.getElementById('kpi');
    const subtitleEl = document.getElementById('subtitle');
    brandEl.textContent = CONTENT.brand || "";
    titleEl.textContent = CONTENT.title || "";
    kpiEl.textContent = CONTENT.kpi || "";
    subtitleEl.textContent = CONTENT.subtitle || "";

    /* Bot√≥n ‚ÄúDato ‚Üî Contexto‚Äù (solo texto del bot√≥n; t√∫ decides si lo usas) */
    let showingDato = true;
    const toggleBtn = document.getElementById('toggle');
    toggleBtn.addEventListener('click',()=>{
      showingDato=!showingDato;
      toggleBtn.textContent = showingDato ? "Dato ‚Üî Contexto" : "Contexto ‚Üî Dato";
    });

    /* ====== HORARIO (sin cuenta atr√°s) ====== */
    const live = document.getElementById('view-live');
    const def  = document.getElementById('view-default');
    const countdownEl = document.getElementById('countdown'); // lo dejamos vac√≠o
    function showView(liveOn){
      live.classList.toggle('hidden', !liveOn);
      def.classList.toggle('hidden',  liveOn);
      document.body.classList.toggle('show-hero', !liveOn);
      countdownEl.textContent = ""; // sin contador
    }
    function inFixedWindow(startISO, endISO){
      const now=Date.now(), s=Date.parse(startISO), e=Date.parse(endISO);
      if(isNaN(s)||isNaN(e)) return false; return now>=s && now<e;
    }
    function inDailyWindow(startHM, endHM){
      const [sh,sm]=(startHM||"00:00").split(":").map(Number);
      const [eh,em]=(endHM||"23:59").split(":").map(Number);
      const now=new Date(), start=new Date(now), end=new Date(now);
      start.setHours(sh||0, sm||0, 0, 0); end.setHours(eh||0, em||0, 0, 0);
      if(end<=start) end.setDate(end.getDate()+1); // cruza medianoche
      // si es de madrugada y a√∫n no lleg√≥ start, mueve rango a ‚Äúayer‚Üíhoy‚Äù
      if(now<start && (end-start)>12*3600*1000){ start.setDate(start.getDate()-1); end.setDate(end.getDate()-1); }
      return now>=start && now<end;
    }
    function reevaluate(){
      let liveOn=false;
      if(CONTENT.mode==="window" && CONTENT.windowISO){
        liveOn = inFixedWindow(CONTENT.windowISO.start, CONTENT.windowISO.end);
      }else{
        liveOn = inDailyWindow(CONTENT.dailyWindow?.start, CONTENT.dailyWindow?.end);
      }
      showView(liveOn);
    }
    reevaluate(); setInterval(reevaluate, 30*1000);

    /* ====== BARRA PROGRESO (DECORATIVA) ====== */
    const bar=document.getElementById('bar');
    document.addEventListener('scroll',()=>{const max=document.body.scrollHeight-innerHeight; const p=max>0?scrollY/max:0; bar.style.transform=`scaleX(${p})`;},{passive:true});

    /* ====== COPIAR TEXTO PARA X ====== */
    document.getElementById('copy').addEventListener('click',async()=>{
      try{
        await navigator.clipboard.writeText(`${CONTENT.shareText||""} ${location.href}`);
        const b=document.getElementById('copy'); b.textContent="Copiado ‚úì"; setTimeout(()=>b.textContent="Copiar para X",1400);
      }catch(e){ alert("No se pudo copiar"); }
    });

    /* ====== CARRUSEL (relleno desde CONTENT.carousel) ====== */
    (function(){
      const track=document.getElementById('track'), dots=document.getElementById('dots');
      (CONTENT.carousel||[]).forEach((it,i)=>{
        const slide=document.createElement('div'); slide.className='slide';
        slide.innerHTML=`<img src="${it.src}" alt=""><div class="caption">${it.caption||""}</div>`;
        track.appendChild(slide);
        const d=document.createElement('div'); d.className='dot'+(i===0?' active':''); dots.appendChild(d);
      });
      if(!CONTENT.carousel?.length){document.querySelector('.carousel').classList.add('hidden');}
      const prev=document.getElementById('prev'), next=document.getElementById('next'); let i=0,startX=0,dx=0;
      function setIndex(n){i=Math.max(0,Math.min((CONTENT.carousel||[]).length-1,n)); track.style.transform=`translateX(${-i*100}%)`; dots.querySelectorAll('.dot').forEach((d,k)=>d.classList.toggle('active',k===i));}
      prev.addEventListener('click',()=>setIndex(i-1)); next.addEventListener('click',()=>setIndex(i+1));
      track.addEventListener('touchstart',e=>{startX=e.touches[0].clientX; dx=0;},{passive:true});
      track.addEventListener('touchmove',e=>{dx=e.touches[0].clientX-startX; track.style.transform=`translateX(${-i*100+(dx/innerWidth)*100}%)`;},{passive:true});
      track.addEventListener('touchend',()=>{ if(Math.abs(dx)>40){ setIndex(i+(dx<0?1:-1)); } else setIndex(i); });
    })();

    /* ====== STORIES (relleno desde CONTENT.stories) ====== */
    (function(){
      const track=document.getElementById('storyTrack'); const dots=document.getElementById('storyDots');
      (CONTENT.stories||[]).forEach((s,idx)=>{
        const el=document.createElement('div'); el.className='story';
        el.innerHTML=`<img src="${s.img}" alt=""><div class="label">${idx+1}/${CONTENT.stories.length}</div><div class="text">${s.text||""}</div>`;
        track.appendChild(el);
        const d=document.createElement('div'); d.className='story-dot'+(idx===0?' active':''); dots.appendChild(d);
      });
      if(!CONTENT.stories?.length){document.querySelector('.stories').classList.add('hidden'); return;}
      const total=CONTENT.stories.length; let i=0, startX=0, dx=0, timer;
      function setIndex(n){ i=Math.max(0,Math.min(total-1,n)); track.style.transform=`translateX(${-i*100}%)`; dots.querySelectorAll('.story-dot').forEach((d,k)=>d.classList.toggle('active',k===i)); }
      function autoplay(){ clearTimeout(timer); timer=setTimeout(()=>{ setIndex((i+1)%total); autoplay(); }, 3500); }
      autoplay();
      track.addEventListener('touchstart',e=>{startX=e.touches[0].clientX; dx=0; clearTimeout(timer);},{passive:true});
      track.addEventListener('touchmove',e=>{dx=e.touches[0].clientX-startX; track.style.transform=`translateX(${-i*100+(dx/innerWidth)*100}%)`;},{passive:true});
      track.addEventListener('touchend',()=>{ if(Math.abs(dx)>40){ setIndex(i+(dx<0?1:-1)); } else setIndex(i); autoplay(); });
      dots.querySelectorAll('.story-dot').forEach((d,idx)=>d.addEventListener('click',()=>{ setIndex(idx); autoplay(); }));
    })();

    /* ====== ENCUESTA (localStorage; un voto por dispositivo) ====== */
    (function(){
      const optionsWrap=document.getElementById('options'); const totalsEl=document.getElementById('totals'); const pollQ=document.getElementById('pollQ');
      if(!CONTENT.pollQuestion || !CONTENT.pollOptions?.length){ document.querySelector('.poll').classList.add('hidden'); return; }
      pollQ.textContent = CONTENT.pollQuestion;
      const KEY = CONTENT.pollKey || 'vk_poll';
      let saved; try{ saved=JSON.parse(localStorage.getItem(KEY) || "{}"); }catch(_){ saved={}; }
      if(!saved || typeof saved!=='object') saved={}; if(!saved.votes) saved.votes={}; if(typeof saved.voted!=='boolean') saved.voted=false; if(!saved.choice) saved.choice="";
      CONTENT.pollOptions.forEach(opt=>{ if(!(opt in saved.votes)) saved.votes[opt]=0; });
      function totalVotes(){ return Object.values(saved.votes).reduce((a,b)=>a+b,0); }
      function render(){
        optionsWrap.innerHTML=""; const t=totalVotes();
        CONTENT.pollOptions.forEach(opt=>{
          const row=document.createElement('div'); row.className='opt';
          const btn=document.createElement('button'); btn.textContent=saved.voted ? "Votado" : "Votar"; btn.disabled=!!saved.voted; btn.addEventListener('click',()=>vote(opt));
          const name=document.createElement('div'); name.style.minWidth='150px'; name.textContent=opt;
          const bar=document.createElement('div'); bar.className='barline'; const fill=document.createElement('div'); fill.className='fill';
          const pct=t?Math.round((saved.votes[opt]||0)*100/t):0; fill.style.width=pct+'%'; bar.appendChild(fill);
          const perc=document.createElement('div'); perc.style.minWidth='42px'; perc.className='muted'; perc.textContent=(pct||0)+"%";
          row.appendChild(btn); row.appendChild(name); row.appendChild(bar); row.appendChild(perc);
          if(saved.choice===opt){ const you=document.createElement('span'); you.className='muted'; you.style.marginLeft='6px'; you.textContent='¬∑ tu voto'; row.appendChild(you); }
          optionsWrap.appendChild(row);
        });
        totalsEl.textContent = `Total votos (local): ${totalVotes()}`;
      }
      function vote(option){ if(saved.voted) return; if(!CONTENT.pollOptions.includes(option)) return;
        saved.votes[option]=(saved.votes[option]||0)+1; saved.voted=true; saved.choice=option;
        try{ localStorage.setItem(KEY, JSON.stringify(saved)); }catch(_){} render();
      }
      render();
    })();

    /* ====== RELLENAR ENLACES/TEXTOS DE LA HERO FINAL ====== */
    document.getElementById('brandFinal').textContent = CONTENT.finalBrand || "";
    document.getElementById('handleFinal').textContent = CONTENT.finalHandle || "";
    document.getElementById('bioFinal').textContent = CONTENT.finalBio || "";
    document.getElementById('ctaTitle').textContent = CONTENT.ctaTitle || "";
    document.getElementById('ctaSub').textContent   = CONTENT.ctaSub || "";
    document.getElementById('ctaX').href = CONTENT.xUrl || "#";
    document.getElementById('ctaIG').href = CONTENT.igUrl || "#";
    document.getElementById('igLogo').href = CONTENT.igUrl || "#";
    document.getElementById('xLogo').href  = CONTENT.xUrl || "#";
  </script>
</body>
</html>
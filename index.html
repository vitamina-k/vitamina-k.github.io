<!doctype html>
<html lang="es">
<head>
  <!-- ===== META ===== -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Vitamina K ‚Äî Publicaci√≥n</title>
  <meta name="description" content="Publicaci√≥n viva con carrusel, stories y encuesta.">
  <meta property="og:title" content="Vitamina K ‚Äî Publicaci√≥n">
  <meta property="og:description" content="Publicaci√≥n viva con carrusel, stories y encuesta.">
  <meta property="og:type" content="website">

  <style>
    /* ===== THEME (claro/oscuro) ===== */
    :root{
      --fg:#101216; --bg:#f7f8fb; --card:#ffffffcc; --accent:#0b5cff; --muted:#6b7280;
    }
    @media (prefers-color-scheme: dark){
      :root{ --fg:#eceff4; --bg:#0b0d12; --card:#0f1320cc; --accent:#7aa2ff; --muted:#9aa3b2; }
    }

    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}

    /* Layout centrado */
    .wrap{
      /* üß© No edites: mantiene la tarjeta centrada vertical y horizontal */
      min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px;
    }

    /* Tarjeta base (vista viva) */
    .card{
      width:clamp(320px,92vw,860px);
      border:1px solid #00000012; border-radius:18px;
      padding:22px 22px 18px; background:var(--card);
      backdrop-filter:saturate(1.2) blur(12px); box-shadow:0 12px 42px #00000014;
    }

    .brand{display:flex;gap:10px;align-items:center;margin-bottom:6px;font-weight:700;letter-spacing:.2px}
    .headline{font-size:clamp(22px,5vw,38px);margin:8px 0 6px}
    .kpi{font-size:clamp(26px,6.5vw,52px);font-weight:800;margin:2px 0 8px;color:var(--accent)}
    .sub{opacity:.9;margin:0 0 12px;color:var(--muted)}
    .muted{color:var(--muted)}
    .hidden{display:none}

    /* Barra superior de progreso (decorativa) */
    .bar{position:fixed;top:0;left:0;height:3px;background:var(--accent);transform-origin:0 0;transform:scaleX(0);z-index:10}

    /* Controles (botones) */
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button,.btn{border:1px solid #00000022;background:transparent;padding:10px 14px;border-radius:12px;cursor:pointer;color:inherit;text-decoration:none}
    button:hover,.btn:hover{border-color:#00000044}

    /* ===== Carrusel ===== */
    .carousel{position:relative;border-radius:14px;overflow:hidden;user-select:none}
    .track{display:flex;transition:transform .35s ease-out;will-change:transform}
    .slide{min-width:100%;height:220px;background:#000;display:grid;place-items:center;position:relative}
    .slide img{width:100%;height:100%;object-fit:cover;display:block;filter:contrast(1.02)}
    .caption{position:absolute;left:12px;bottom:12px;right:12px;background:linear-gradient(to top,#0009,#0000);color:#fff;padding:10px 12px;border-radius:10px;font-weight:600}
    .nav{position:absolute;top:50%;transform:translateY(-50%);display:flex;gap:8px;width:100%;justify-content:space-between;padding:0 6px;pointer-events:none}
    .nav button{pointer-events:auto;background:rgba(0,0,0,.35);color:#fff;border:0;border-radius:10px;padding:8px 10px}
    .dots{display:flex;gap:6px;justify-content:center;margin-top:8px}
    .dot{width:8px;height:8px;border-radius:50%;background:#00000033}
    .dot.active{background:var(--accent)}

    /* ===== Stories ===== */
    .stories{margin-top:12px;border:1px dashed #00000022;border-radius:14px;padding:8px}
    .story-frame{position:relative;height:320px;border-radius:12px;overflow:hidden}
    .story-track{display:flex;height:100%;transition:transform .3s ease-out}
    .story{min-width:100%;position:relative;background:#000}
    .story img{width:100%;height:100%;object-fit:cover;opacity:.88}
    .story .label{position:absolute;left:0;top:0;padding:8px 10px;background:rgba(0,0,0,.45);color:#fff;border-bottom-right-radius:10px;font-weight:700}
    .story .text{position:absolute;left:10px;right:10px;bottom:12px;color:#fff;font-weight:700;font-size:clamp(16px,3.5vw,24px);text-shadow:0 2px 12px #000}
    .story-dots{display:flex;gap:6px;justify-content:center;margin-top:8px}
    .story-dot{flex:1;height:4px;background:#00000033;border-radius:3px}
    .story-dot.active{background:var(--accent)}

    /* ===== Encuesta ===== */
    .poll{margin-top:14px;padding:12px;border:1px solid #00000018;border-radius:12px}
    .poll h3{margin:0 0 8px}
    .opt{display:flex;align-items:center;gap:8px;margin:8px 0}
    .barline{flex:1;height:8px;background:#00000015;border-radius:6px;overflow:hidden}
    .fill{height:100%;width:0%;background:var(--accent);transition:width .4s ease}
    .only-once{font-size:13px}
    .opt button[disabled]{opacity:.6;cursor:not-allowed}
    .you{font-size:12px;color:var(--muted);margin-left:6px}

    /* ===== HERO (tarjeta final) ===== */
    .card.hero{
      /* üß© Tarjeta que aparece al finalizar la cuenta atr√°s */
      width:clamp(360px,96vw,980px);
      padding:28px; border-radius:22px;
      background:
        radial-gradient(1200px 600px at 10% -10%, #0b5cff18, transparent 60%),
        radial-gradient(900px 500px at 110% 0%, #8aa9ff18, transparent 60%),
        var(--card);
    }
    .hero-grid{display:grid;grid-template-columns:1fr 1.2fr;gap:18px;align-items:start}
    @media (max-width:800px){ .hero-grid{grid-template-columns:1fr;gap:14px} }

    /* Avatares / badges (puedes ocultarlos si no te gustan) */
    .avatar{
      width:140px;height:140px;border-radius:20px;display:grid;place-items:center;
      font-weight:900;font-size:40px;background:linear-gradient(135deg,#0b5cff,#8aa2ff);
      color:#fff; box-shadow:0 10px 30px #0b5cff44; transform:perspective(600px) rotateY(-6deg) rotateX(3deg);
    }
    .badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .chip{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid #00000022;background:#ffffff40;backdrop-filter:blur(6px)}

    .hero-title{font-size:clamp(20px,4.6vw,34px);margin:6px 0}
    .hero-copy{color:var(--muted);margin:6px 0 14px}
    .cta-row{display:flex;gap:10px;flex-wrap:wrap}
    .btn.primary{background:var(--accent);color:#fff;border-color:transparent}
    .btn.primary:hover{filter:brightness(0.95)}
    .hero-mini{display:flex;gap:8px;margin-top:10px}
    .pill{border:1px dashed #00000033;background:transparent;padding:8px 12px;border-radius:999px;cursor:pointer}
    .pill:hover{border-color:#00000066}

    /* Fondo cuando se muestra la HERO (est√©tico) */
    body.show-hero{
      background:
        radial-gradient(1200px 700px at 50% -10%, #0b5cff22, transparent 60%),
        radial-gradient(900px 600px at 50% 10%, #8aa9ff22, transparent 60%),
        var(--bg);
    }

    @media (prefers-reduced-motion:no-preference){
      .card.hero{animation:heroIn .45s ease-out both}
      @keyframes heroIn{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none}}
    }
  </style>
</head>
<body>
  <div class="bar" id="bar"></div>

  <div class="wrap">
    <!-- ===== Vista VIVA (mientras dura) ===== -->
    <article class="card" id="view-live">
      <!-- üß© EDITA: marca y textos principales de la noticia -->
      <div class="brand" id="brandEl">VITAMINA K ¬∑ Publicaci√≥n</div> <!-- t√≠tulo de secci√≥n -->
      <h1 class="headline" id="title"><!-- üß© EDITA: T√≠tulo de la noticia --></h1>
      <div class="kpi" id="kpi"><!-- üß© EDITA: KPI opcional, deja vac√≠o si no quieres mostrarlo --></div>
      <p class="sub" id="subtitle"><!-- üß© EDITA: Subt√≠tulo corto de la noticia --></p>

      <!-- üß© EDITA: Carrusel de im√°genes (sustituye las URLs) -->
      <section class="carousel" id="carousel">
        <div class="track" id="track">
          <!-- Reemplaza SOLO las URLs y los captions; estructura igual -->
          <div class="slide"><img src="https://images.unsplash.com/photo-1586201375778-3d5f48f0b35f?q=80&w=1400&auto=format&fit=crop" alt=""><div class="caption">Factura del s√∫per, 2025</div></div>
          <div class="slide"><img src="https://images.unsplash.com/photo-1500576992153-027bb7fbdc32?q=80&w=1400&auto=format&fit=crop" alt=""><div class="caption">Cola ante cajas autom√°ticas</div></div>
          <div class="slide"><img src="https://images.unsplash.com/photo-1542831371-29b0f74f9713?q=80&w=1400&auto=format&fit=crop" alt=""><div class="caption">Salarios congelados</div></div>
          <div class="slide"><img src="https://images.unsplash.com/photo-1509099836639-18ba1795216d?q=80&w=1400&auto=format&fit=crop" alt=""><div class="caption">Comparativa 2018 vs 2025</div></div>
        </div>
        <div class="nav">
          <button id="prev" aria-label="Anterior">‚Üê</button>
          <button id="next" aria-label="Siguiente">‚Üí</button>
        </div>
        <div class="dots" id="dots"></div>
      </section>

      <!-- üß© EDITA: Stories -->
      <section class="stories" id="stories">
        <div class="story-frame" id="storyFrame">
          <div class="story-track" id="storyTrack">
            <div class="story"><img src="https://images.unsplash.com/photo-1520975693414-8f1a6c5a7d8f?q=80&w=1400&auto=format&fit=crop" alt=""><div class="label">1/4</div><div class="text">Si la cesta sube, el discurso baja‚Ä¶</div></div>
            <div class="story"><img src="https://images.unsplash.com/photo-1485230895905-ec40ba36b9bc?q=80&w=1400&auto=format&fit=crop" alt=""><div class="label">2/4</div><div class="text">Dato: +22% en b√°sicos 2021‚Üí2025</div></div>
            <div class="story"><img src="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?q=80&w=1400&auto=format&fit=crop" alt=""><div class="label">3/4</div><div class="text">Sueldo real: plano como un ECG</div></div>
            <div class="story"><img src="https://images.unsplash.com/photo-1542219550-37153d387c47?q=80&w=1400&auto=format&fit=crop" alt=""><div class="label">4/4</div><div class="text">La pol√≠tica promete. La nevera responde.</div></div>
          </div>
        </div>
        <div class="story-dots" id="storyDots">
          <div class="story-dot"></div><div class="story-dot"></div><div class="story-dot"></div><div class="story-dot"></div>
        </div>
      </section>

      <!-- üß© EDITA: Encuesta -->
      <section class="poll" id="poll">
        <h3 id="pollQ"><!-- se rellena desde CONFIG.pollQuestion --></h3>
        <div class="only-once muted">Voto √∫nico por dispositivo</div>
        <div id="options"></div>
        <div id="totals" class="muted" style="margin-top:8px"></div>
      </section>

      <div class="controls">
        <button id="copy">Copiar para X</button>
        <button id="toggle">Dato ‚Üî Contexto</button>
        <span id="countdown" class="muted"></span>
      </div>
    </article>

    <!-- ===== Vista BASE (HERO final, cuando termina) ===== -->
    <article class="card hero hidden" id="view-default">
      <!-- üß© EDITA: Esta es la tarjeta que quieres mejorar tras caducar -->
      <div class="brand">VITAMINA K</div>
      <h1 class="headline">@vitaminak.of</h1>
      <p class="sub">S√≠gueme en IG y X. Publicaciones cortas, claras y con impacto.</p>

      <div class="hero-grid">
        <div class="hero-left">
          <div class="avatar" aria-hidden="true">VK</div>
          <div class="badges">
            <span class="chip">#datosreales</span>
            <span class="chip">#sinHumo</span>
            <span class="chip">#MadeInSpain</span>
          </div>
        </div>

        <div class="hero-right">
          <h2 class="hero-title">La pr√≥xima noticia temporal se est√° cocinando‚Ä¶</h2>
          <p class="hero-copy">Mientras tanto, puedes ver m√°s y seguirme en Instagram y X.</p>

          <div class="cta-row">
            <a class="btn primary" href="https://x.com/vitaminakof" target="_blank" rel="noopener">Seguir en X</a>
            <a class="btn primary" href="https://www.instagram.com/vitaminak.of" target="_blank" rel="noopener">Seguir en Instagram</a>
            <button class="btn" id="copy-hero">Copiar enlace</button>
          </div>

          <div class="hero-mini">
            <button class="pill" id="notify-me">üîî Recibir avisos</button>
            <button class="pill" id="random-post">üé≤ Ver publicaci√≥n aleatoria</button>
          </div>
        </div>
      </div>
    </article>
  </div>

  <script>
    /* ====== CONFIG EDITABLE (cambia SOLO aqu√≠) ======
       Aqu√≠ actualizas t√≠tulo, KPI, subt√≠tulo, el texto de dato/contexto,
       el tiempo de vida (cuenta atr√°s) y la encuesta.
    */
    const CONFIG = {
      // üß© EDITA: Textos principales de la noticia
      title: "",
      kpi: "",
      subtitle: "",
      shareText: "El dato que no te cuentan. #VitaminaK",

      // üß© EDITA: Duraci√≥n
      expiresHours: 6,
      expiresSeconds: null,

      // üß© EDITA: Dato y Contexto
      datoHTML: "<strong>Dato</strong>: ‚Ä¶",
      contextoHTML: "<strong>Contexto</strong>: ‚Ä¶",

      // üß© EDITA: Encuesta
      pollKey: "vk_poll_v3",
      pollQuestion: "",
      pollOptions: [
        // "PSOE","PP","Vox","Se Acab√≥ la Fiesta","Sumar/Podemos","Otros"
      ],
    };
    /* ===== FIN CONFIG EDITABLE ===== */

    /* ===== Montaje b√°sico de textos ===== */
    const titleEl = document.getElementById('title');
    const kpiEl = document.getElementById('kpi');
    const subtitleEl = document.getElementById('subtitle');

    titleEl.textContent = CONFIG.title || "";
    kpiEl.textContent = CONFIG.kpi || "";
    subtitleEl.textContent = CONFIG.subtitle || "";

    let showingDato = true;

    /* ===== Cuenta atr√°s + cambio de vista ===== */
    const live = document.getElementById('view-live');
    const def  = document.getElementById('view-default');
    const countdown = document.getElementById('countdown');

    const expiresAt = Date.now() + 5 * 1000; // ahora + 5 segundos

    function tick(){
      const ms = expiresAt - Date.now();
      if (ms <= 0) {
        live.classList.add('hidden');
        def.classList.remove('hidden');
        document.body.classList.add('show-hero');
        countdown.textContent = "Caducado";
        return;
      }
      const h = Math.floor(ms/3600000),
            m = Math.floor((ms%3600000)/60000),
            s = Math.floor((ms%60000)/1000);
      countdown.textContent = `Desaparece en ${h}h ${m}m ${s}s`;
    }
    setInterval(tick, 1000); tick();

    /* ===== Barra de progreso (decorativa) ===== */
    const bar = document.getElementById('bar');
    document.addEventListener('scroll', () => {
      const max = document.body.scrollHeight - innerHeight;
      const p = max>0 ? scrollY/max : 0;
      bar.style.transform = `scaleX(${p})`;
    }, {passive:true});

    /* ===== Dato/Contexto (solo cambia el texto del bot√≥n) ===== */
    const toggleBtn = document.getElementById('toggle');
    toggleBtn.addEventListener('click', ()=>{
      showingDato = !showingDato;
      toggleBtn.textContent = showingDato ? "Dato ‚Üî Contexto" : "Contexto ‚Üî Dato";
    });

    /* ===== Copiar para X ===== */
    const copyBtn = document.getElementById('copy');
    copyBtn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(`${CONFIG.shareText} ${location.href}`);
        copyBtn.textContent = "Copiado ‚úì";
        setTimeout(()=>copyBtn.textContent="Copiar para X",1400);
      }catch(e){ alert("No se pudo copiar"); }
    });

    /* ===== Carrusel im√°genes ===== */
    (function(){
      const track = document.getElementById('track');
      const slides = Array.from(track.children);
      const dots = document.getElementById('dots');
      const prev = document.getElementById('prev');
      const next = document.getElementById('next');
      let i = 0, startX=0, dx=0;

      slides.forEach((_,idx)=>{
        const d=document.createElement('div');
        d.className='dot'+(idx===0?' active':''); dots.appendChild(d);
      });

      function setIndex(n){
        i = Math.max(0, Math.min(slides.length-1, n));
        track.style.transform = `translateX(${-i*100}%)`;
        dots.querySelectorAll('.dot').forEach((d,k)=>d.classList.toggle('active',k===i));
      }
      prev.addEventListener('click', ()=>setIndex(i-1));
      next.addEventListener('click', ()=>setIndex(i+1));

      // Touch (m√≥vil)
      track.addEventListener('touchstart', e=>{ startX=e.touches[0].clientX; dx=0; }, {passive:true});
      track.addEventListener('touchmove',  e=>{ dx=e.touches[0].clientX - startX; track.style.transform=`translateX(${-i*100 + (dx/innerWidth)*100}%)`; }, {passive:true});
      track.addEventListener('touchend',   ()=>{ if(Math.abs(dx)>40){ setIndex(i + (dx<0?1:-1)); } else setIndex(i); });

      // Mouse (desktop)
      let down=false, start=0;
      track.addEventListener('mousedown', e=>{down=true; start=e.clientX;});
      window.addEventListener('mouseup', ()=>{if(!down) return; down=false; if(Math.abs(dx)>40){ setIndex(i + (dx<0?1:-1)); } else setIndex(i);});
      window.addEventListener('mousemove', e=>{ if(!down) return; dx=e.clientX-start; track.style.transform=`translateX(${-i*100 + (dx/innerWidth)*100}%)`;});
    })();

    /* ===== Stories swipe ===== */
    (function(){
      const track = document.getElementById('storyTrack');
      const dots = Array.from(document.getElementById('storyDots').children);
      const total = dots.length;
      let i=0, startX=0, dx=0, timer;

      function setIndex(n){ i=Math.max(0,Math.min(total-1,n)); track.style.transform=`translateX(${-i*100}%)`; dots.forEach((d,k)=>d.classList.toggle('active',k===i)); }
      function autoplay(){ clearTimeout(timer); timer=setTimeout(()=>{ setIndex((i+1)%total); autoplay(); }, 3500); }
      autoplay();

      track.addEventListener('touchstart', e=>{ startX=e.touches[0].clientX; dx=0; clearTimeout(timer); },{passive:true});
      track.addEventListener('touchmove',  e=>{ if(!startX) return; dx=e.touches[0].clientX-startX; track.style.transform=`translateX(${-i*100 + (dx/innerWidth)*100}%)`; },{passive:true});
      track.addEventListener('touchend',   ()=>{ if(Math.abs(dx)>40){ setIndex(i + (dx<0?1:-1)); } else setIndex(i); autoplay(); startX=0; });

      dots.forEach((d,idx)=>d.addEventListener('click', ()=>{ setIndex(idx); autoplay(); }));
    })();

    /* ===== Encuesta (una vez por dispositivo) ===== */
    (function(){
      const pollBox   = document.getElementById('poll');
      const optionsEl = document.getElementById('options');
      const totalsEl  = document.getElementById('totals');
      const qEl       = document.getElementById('pollQ');

      // Si no hay pregunta u opciones, ocultamos la encuesta
      if(!CONFIG.pollQuestion || !CONFIG.pollOptions || !CONFIG.pollOptions.length){
        pollBox.classList.add('hidden'); return;
      }
      qEl.textContent = CONFIG.pollQuestion;

      const KEY = CONFIG.pollKey || "vk_poll";
      let saved;
      try{ saved = JSON.parse(localStorage.getItem(KEY) || "{}"); }catch(_){ saved = {}; }
      if(!saved || typeof saved!=='object') saved={};
      if(!saved.votes) saved.votes = {};
      if(typeof saved.voted!=='boolean') saved.voted=false;
      if(!saved.choice) saved.choice = "";

      CONFIG.pollOptions.forEach(opt=>{ if(!(opt in saved.votes)) saved.votes[opt]=0; });
      function totalVotes(){ return Object.values(saved.votes).reduce((a,b)=>a+b,0); }

      function render(){
        optionsEl.innerHTML = "";
        const t = totalVotes();

        CONFIG.pollOptions.forEach(opt=>{
          const row = document.createElement('div'); row.className='opt';

          const btn = document.createElement('button');
          btn.textContent = saved.voted ? "Votado" : "Votar";
          btn.disabled = !!saved.voted;
          btn.addEventListener('click', ()=> vote(opt));

          const name = document.createElement('div'); name.style.minWidth='150px'; name.textContent = opt;

          const bar = document.createElement('div'); bar.className='barline';
          const fill = document.createElement('div'); fill.className='fill';
          const pct = t ? Math.round((saved.votes[opt]||0)*100/t) : 0;
          fill.style.width = pct+'%';
          bar.appendChild(fill);

          const perc = document.createElement('div'); perc.style.minWidth='38px'; perc.className='muted'; perc.textContent = (pct||0) + "%";

          row.appendChild(btn); row.appendChild(name); row.appendChild(bar); row.appendChild(perc);

          if(saved.choice === opt){
            const you = document.createElement('span'); you.className='you'; you.textContent="¬∑ tu voto"; row.appendChild(you);
          }

          optionsEl.appendChild(row);
        });

        totalsEl.textContent = `Total votos (local): ${totalVotes()}`;
      }

      function vote(option){
        if(saved.voted) return;
        if(!CONFIG.pollOptions.includes(option)) return;

        saved.votes[option] = (saved.votes[option]||0) + 1;
        saved.voted = true;
        saved.choice = option;
        try{ localStorage.setItem(KEY, JSON.stringify(saved)); }catch(_){}
        render();
      }

      render();
    })();

    /* ===== Atajos / Interacciones HERO ===== */
    document.addEventListener('keydown', (e)=>{ if(e.key.toLowerCase()==='d') { showingDato = !showingDato; } });

    const copyHero = document.getElementById('copy-hero');
    copyHero?.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(location.href);
        copyHero.textContent = "Enlace copiado ‚úì";
        setTimeout(()=>copyHero.textContent="Copiar enlace",1400);
      }catch(e){ alert("No se pudo copiar"); }
    });

    document.getElementById('notify-me')?.addEventListener('click', ()=>{
      alert("Pronto: avisos cuando publiquemos algo nuevo. Por ahora, s√≠gueme en X/IG üòâ");
    });

    document.getElementById('random-post')?.addEventListener('click', ()=>{
      const posts = ["index.html" /*,"publicacion-2.html","publicacion-3.html"*/];
      const pick = posts[Math.floor(Math.random()*posts.length)];
      location.href = pick;
    });
  </script>
</body>
</html>
